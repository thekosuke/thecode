<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Global Site Tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106529015-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments)};
            gtag('js', new Date());
    
            gtag('config', 'UA-106529015-1');
        </script>
    
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="keywords" content="kosuke futsukaichi, kosuke, futsukaichi, portfolio, design, designer, graphic designer, experience designer, product designer, ux/ui, vancouver, canada">
        <meta name="description" content="Kosuke's design portfolio">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noodp">
        
        <meta property="og:type" content="website"/>
        <meta property="og:title" content="Kosuke"/>
        <meta property="og:image" content="img/opengraph.png"/>
        
        <title>kosuke</title>
    
        <link rel="icon" type="image/png" href="img/favicon.png">
        <link rel="apple-touch-icon" type="image/png" sizes="150x150" href="img/favicon.png"/>
    
        <link rel="stylesheet" href="css/fonts.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/grid.css">
        <link rel="stylesheet" href="css/normalize.css"> 
        <style>      
            html, body {
                margin: 0;
                width: 100%;
                height: 100%;
            }       
        </style>
      </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap" class="grid-2">
        <div><span></span></div>        

            <div id="mainDialog">

                <div id="dialogText"><h1>Enter password</h1></div>

                <div id="passArea">
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Maybe a typo? Please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Welcome!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button"><h1>Unlock</h1></button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>

                <div id="nocrypto" class="error">
                    <p>
                        Seems like your web browser is outdated. Please visit this page using a modern browser.
                    </p>
                </div>

            </div>

        <div><span></span></div>
    </div>   
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 200);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
